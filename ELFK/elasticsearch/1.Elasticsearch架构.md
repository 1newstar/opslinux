# 一、elasticsearch架构

  ![elasticsearch架构](https://github.com/Lancger/opslinux/blob/master/images/elasticsearch%E6%9E%B6%E6%9E%84.png)

   我们从下往上看，底层是Gateway.这个Gateway就是elasticsearch支持的索引数据的存储格式。当这个elasticsearch启动的时候，它就会从Gateway里面读取索引数据。我们可以看到它支持的一些格式，有这本地的Local FileSystem（默认），分布式文件系统，Hadoop 的 HDFS 和 amazon 的 s3 云存储服务。那么接下来上面这层就是Lucene的框架

  ![elasticsearch_lucene](https://github.com/Lancger/opslinux/blob/master/images/elasticsearch_lucene.png)

我们前面提到ElasticSearch就是基于Lucene框架写的。然后往上就是这个ElasticSearch对数据的加工处理方式了。我们可以看到有这个创建索引的模块

  ![elasticsearch_mapping](https://github.com/Lancger/opslinux/blob/master/images/elasticsearch_mapping.png)

还有搜索的模块，还有mapping和River.那么这个Mapping是什么意思呢？这个Mapping就是定义索引下面type字段的处理规则。比如说索引如何建立，还有索引数据类型等等。相当于关系型数据库里的schema.比如mysql里的schema。那么这个River呢？是一个运行在ElasticSearch集群内部的一个插件。主要就是用来从外部获取异构数据，然后在ElasticSearch里面创建索引。常见的有官方的 river 有 couchDB、RabbitMQ、Twitter、Wikipedia。那么接下来这层


参考文档：

http://www.cnblogs.com/ningskyer/articles/5789010.html   elasticsearch架构图
